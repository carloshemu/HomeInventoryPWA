# 📄 需求文档：家庭物品跟踪应用（PWA）

## 1. 项目名称（可选）

**HomeInventory PWA**（家庭物品跟踪系统）

---

## 2. 项目背景和目标

用户希望通过一款轻量级、可离线使用的 PWA 应用，记录、管理和查询家庭中物品的位置与状态。该应用运行在 iPhone 上，无需依赖后端服务器，所有数据保存在浏览器本地，具有持久性，并支持导出与导入。

---

## 3. 功能需求

### 3.1 核心功能

| 功能 | 说明 |
|------|------|
| 添加物品 | 输入物品名称、位置、可选备注，可添加分类、图片 |
| 修改物品 | 支持修改位置、备注等信息 |
| 删除物品 | 可以删除不再需要跟踪的记录 |
| 搜索功能 | 支持通过关键词快速查找物品（基于名称、位置、备注字段） |
| 分类过滤（可选） | 可对物品进行分类标签，并按类别筛选展示 |
| 本地持久化 | 所有数据保存至 IndexedDB，离线可用，刷新后不丢失 |
| 安装为 PWA | 支持“添加到主屏幕”功能，模拟原生 App 使用体验 |
| 数据导出 | 支持导出当前全部数据为 `.json` 文件（备份或迁移） |
| 数据导入 | 支持从 `.json` 文件导入数据（恢复或合并） |

---

## 4. 技术要求

### 4.1 前端框架

- **框架建议**：React（或 Vue）+ Vite 构建项目  
- **样式库建议**：Tailwind CSS / 纯 CSS
- **状态管理**：React `useState` / `useReducer`，或 Zustand
- **数据存储**：使用 IndexedDB（通过 `idb` 或 `Dexie.js` 封装库）

### 4.2 PWA 支持

- 包含标准 `manifest.json` 文件：
  - `name`, `short_name`, `icons`, `start_url`, `display`, `background_color`
- 注册 `Service Worker` 实现基本的缓存（可用 `workbox`）
- 支持离线首次访问后自动缓存主页面

---

## 5. 数据结构设计

```ts
interface Item {
  id: string;                // UUID
  name: string;              // 物品名称
  location: string;          // 存放位置
  category?: string;         // 分类
  note?: string;             // 备注信息
  photoUrl?: string;         // 图片URL（base64）
  createdAt: string;         // 创建时间
  updatedAt?: string;        // 最近修改时间
}
```

---

## 6. UI 需求（简洁为主）

### 6.1 主页面

- 搜索栏（顶部）
- 添加按钮（+ 图标）
- 物品列表（根据分类或时间排序）
- 每个卡片显示：名称 + 位置 + 分类 + 图片缩略图

### 6.2 添加/编辑页

- 输入框：名称、位置、分类、备注
- 上传图片或拍照（`<input type="file" accept="image/*" capture>`）
- 保存按钮

### 6.3 导入/导出

- 位置：主页面右上角或浮动按钮
- 格式：`.json` 文件

---

## 7. 运行和部署要求

- 项目可通过 `npm run build` 构建为静态文件
- 部署于 GitHub Pages 或 Vercel，生成公开访问链接
- 支持在 Safari 中点击“添加到主屏幕”以安装成 PWA

---

## 8. 非功能性要求

| 方面 | 要求 |
|------|------|
| 离线支持 | 所有功能在断网下可用（使用 IndexedDB 和 Service Worker） |
| 数据隐私 | 所有数据仅保存在本地，不上传 |
| 响应式设计 | 适配 iPhone 屏幕，支持触控优化 |
| 快速启动 | 页面加载不依赖远程请求 |
| 初次访问提示 | 弹窗或气泡提示用户“添加到主屏幕”

---

## 9. 可选增强功能（后续进化）

- 最近移动记录（修改位置时自动保存历史日志）
- 图片拍照上传（使用 `<input type="file" accept="image/*" capture>`）
- 支持多语言（中英切换）
- 设置密码保护（浏览器级，非强加密）

